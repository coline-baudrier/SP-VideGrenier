{% extends "base.html" %}

{% block title %}Connexion{% endblock %}

{% block body %}
<div class="container-fluid bg-image">
    <div class="row">
        <div class="login-wraper">
            <div class="hidden-xs banner-container">
                <img src="images/login.jpg" alt="">
                <div class="banner-text">
                    <div class="b-text">
                        <span class="color-active">Des centaines<br> </span> <span class="color-b1">d'articles vous attendent
                    </span>
                    </div>
                    <div class="line"></div>
                </div>
            </div>
            <div class="login-window">
                <div class="l-head">
                    Connexion
                </div>
                <div class="l-form">
                    <form action="" method="post" id="loginForm">
                        <div id="errorMessages" style="color: red;">
                            {% if error_messages %}
                                {% for key, message in error_messages %}
                                    <p>{{ message }}</p>
                                {% endfor %}
                            {% endif %}
                        </div>
                        <div class="form-group">
                            <label for="exampleInputEmail1">Email</label>
                            <input type="email" class="form-control" id="exampleInputEmail1" name="email"
                                   placeholder="sample@gmail.com">
                        </div>
                        <div class="form-group">
                            <label for="exampleInputPassword1">Password</label>
                            <input type="password" class="form-control" id="exampleInputPassword1"
                                   name="password" placeholder="**********">
                        </div>
                        <div class="checkbox">
                            <label>
                                <label class="checkbox">
                                    <input type="checkbox" name="remember-me">
                                    <span class="arrow"></span>
                                </label> <span>Se souvenir de moi</span>
                                <span class="text2">(non recommandé si vous êtes sur un ordinateur partagé)</span>
                            </label>
                        </div>
                        <div class="row">
                            <div class="col-lg-7 col-xs-12">
                                <button type="submit" name="submit" class="btn btn-cv1">Connexion</button>
                            </div>
                            <div class="hidden-xs">
                                <div class="col-lg-1 ortext">ou</div>
                                <div class="col-lg-4 signuptext"><a href="/register">S'inscrire</a></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12 forgottext">
                                <a href="/reset">Mot de passe oublié ?</a>
                            </div>
                        </div>
                        <div class="row visible-xs">
                            <div class="col-xs-12 text-center">
                                <a href="/register" class="btn btn-link small-signup">S'inscrire</a>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block javascript %}

<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
        const loginForm = document.getElementById('loginForm');
        loginForm.addEventListener('submit', function(event) {
            let errors = [];
            const email = document.getElementById("exampleInputEmail1").value;
            const password = document.getElementById("exampleInputPassword1").value;

            if (!email) {
                errors.push("L'email est obligatoire.");
            } else if (!email.match(/^[^@]+@[^@]+\.[^@]+$/)) {
                errors.push("Le format de l'email n'est pas valide.");
            }

            if (!password) {
                errors.push("Le mot de passe est obligatoire.");
            }

            if (errors.length > 0) {
                event.preventDefault();

                const errorDiv = document.getElementById("errorMessages");
                errorDiv.innerHTML = '';

                errors.forEach(function(error) {
                    const errorText = document.createElement('p');
                    errorText.textContent = error;
                    errorDiv.appendChild(errorText);
                });
            }
        });
    });
</script>

{% endblock %}
